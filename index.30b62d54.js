function r(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function e(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var t=document.querySelector(".start"),n=document.querySelector("tbody").rows,o=document.querySelector(".game-score"),a=document.querySelector(".message-start"),i=document.querySelector(".message-win"),s=document.querySelector(".message-lose"),c=0,u=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];function f(){if(d())for(var r=Math.random()>.1?2:4,e=!1;!e;){var t=Math.floor(4*Math.random()),n=Math.floor(4*Math.random());0===u[t][n]&&(u[t][n]=r,e=!0,l())}}function l(){for(var r,e,t=0;t<4;t++)for(var a=0;a<4;a++)r=n[t].cells[a],e=u[t][a],r.innerText="",r.classList.value="",r.classList.add("field-cell"),e>0&&(r.innerText=String(e),r.classList.add("field-cell--".concat(String(e))));o.innerText=String(c)}function d(){for(var r=0;r<4;r++)for(var e=0;e<4;e++)if(0===u[r][e])return!0;return!1}function v(r){return r.filter(function(r){return 0!==r})}function m(r){for(var e=v(r),n=0;n<r.length-1;n++)e[n]===e[n+1]&&isFinite(e[n])&&(e[n]*=2,e[n+1]=0,c+=e[n],2048===e[n]&&(i.classList.remove("hidden"),t.classList.remove("restart"),t.innerText="Start"));for(e=v(e);e.length<4;)e.push(0);return e}function h(r,e){for(var t=0;t<r.length;t++)for(var n=0;n<r[t].length;n++)if(r[t][n]!==e[t][n])return!1;return!0}t.addEventListener("click",function(){u=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],c=0,l(),f(),f(),t.classList.add("restart"),t.innerText="Restart",a.classList.add("hidden"),i.classList.add("hidden"),s.classList.add("hidden")}),document.addEventListener("keyup",function(r){if(t.classList.contains("restart"))switch(r.code){case"ArrowLeft":!function(){for(var r=u.map(function(r){return e(r)}),t=0;t<4;t++){var n=u[t];n=m(n),u[t]=n}h(r,u)||f(),l()}();break;case"ArrowRight":!function(){for(var r=u.map(function(r){return e(r)}),t=0;t<4;t++){var n=u[t];n.reverse(),(n=m(n)).reverse(),u[t]=n}h(r,u)||f(),l()}();break;case"ArrowUp":!function(){for(var r=u.map(function(r){return e(r)}),t=0;t<4;t++){var n=[u[0][t],u[1][t],u[2][t],u[3][t]];n=m(n);for(var o=0;o<4;o++)u[o][t]=n[o]}h(r,u)||f(),l()}();break;case"ArrowDown":!function(){for(var r=u.map(function(r){return e(r)}),t=0;t<4;t++){var n=[u[0][t],u[1][t],u[2][t],u[3][t]];n.reverse(),(n=m(n)).reverse();for(var o=0;o<4;o++)u[o][t]=n[o]}h(r,u)||f(),l()}()}!function(){for(var r=!1,e=0;e<4;e++)for(var t=0;t<4;t++)e<3&&(u[e][t]===u[e+1][t]||u[e][t]===u[e][t+1])&&(r=!0);return!!(r||d())}()&&(s.classList.remove("hidden"),t.classList.remove("restart"),t.innerText="Start")});
//# sourceMappingURL=index.30b62d54.js.map
